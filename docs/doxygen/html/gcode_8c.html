<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>gnea\grbl-Mega: gcode.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Grbl%20Logo%20250px[1].png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gnea\grbl-Mega
   &#160;<span id="projectnumber">1.0f</span>
   </div>
   <div id="projectbrief">Source Code Documentation ( Internal Workings )</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gcode_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">gcode.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="grbl_8h_source.html">grbl.h</a>&quot;</code><br />
</div>
<p><a href="gcode_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a94ce060fa38110f7d38f30d990cf6ec7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a94ce060fa38110f7d38f30d990cf6ec7">MAX_LINE_NUMBER</a>&#160;&#160;&#160;10000000</td></tr>
<tr class="memdesc:a94ce060fa38110f7d38f30d990cf6ec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Max line number is defined by the g-code standard to be 99999.  <a href="#a94ce060fa38110f7d38f30d990cf6ec7">More...</a><br /></td></tr>
<tr class="separator:a94ce060fa38110f7d38f30d990cf6ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b43b0f34b36a1f71550c700395426ec"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a9b43b0f34b36a1f71550c700395426ec">MAX_TOOL_NUMBER</a>&#160;&#160;&#160;255</td></tr>
<tr class="memdesc:a9b43b0f34b36a1f71550c700395426ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Limited by max unsigned 8-bit value.  <a href="#a9b43b0f34b36a1f71550c700395426ec">More...</a><br /></td></tr>
<tr class="separator:a9b43b0f34b36a1f71550c700395426ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae667a7d036f9eb5c5160c511160787e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#aae667a7d036f9eb5c5160c511160787e">AXIS_COMMAND_NONE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aae667a7d036f9eb5c5160c511160787e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c92a959513c5f5cd9ffa4a7f55c221d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a6c92a959513c5f5cd9ffa4a7f55c221d">AXIS_COMMAND_NON_MODAL</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a6c92a959513c5f5cd9ffa4a7f55c221d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f90b46c5ff40f120a0e91bae5d6fd64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a6f90b46c5ff40f120a0e91bae5d6fd64">AXIS_COMMAND_MOTION_MODE</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a6f90b46c5ff40f120a0e91bae5d6fd64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86f29b6ddc9d187d81cb71a32aee5443"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a86f29b6ddc9d187d81cb71a32aee5443">AXIS_COMMAND_TOOL_LENGTH_OFFSET</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a86f29b6ddc9d187d81cb71a32aee5443"><td class="mdescLeft">&#160;</td><td class="mdescRight">*Undefined but required  <a href="#a86f29b6ddc9d187d81cb71a32aee5443">More...</a><br /></td></tr>
<tr class="separator:a86f29b6ddc9d187d81cb71a32aee5443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a680597f21a6820d4378600a5385ddb83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a680597f21a6820d4378600a5385ddb83">FAIL</a>(status)&#160;&#160;&#160;<a class="el" href="gcode_8c.html#a6326b13677ba2db62df39610147bc5e0">return</a>(status);</td></tr>
<tr class="separator:a680597f21a6820d4378600a5385ddb83"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad1d03b51ab39d02550d5ea8b02098ab7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#ad1d03b51ab39d02550d5ea8b02098ab7">gc_init</a> ()</td></tr>
<tr class="memdesc:ad1d03b51ab39d02550d5ea8b02098ab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the parser.  <a href="#ad1d03b51ab39d02550d5ea8b02098ab7">More...</a><br /></td></tr>
<tr class="separator:ad1d03b51ab39d02550d5ea8b02098ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d97704c3605ca7d1d9186fc1f93afbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a9d97704c3605ca7d1d9186fc1f93afbd">gc_sync_position</a> ()</td></tr>
<tr class="memdesc:a9d97704c3605ca7d1d9186fc1f93afbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets g-code parser position in mm. Input in steps. Called by the system abort and hard.  <a href="#a9d97704c3605ca7d1d9186fc1f93afbd">More...</a><br /></td></tr>
<tr class="separator:a9d97704c3605ca7d1d9186fc1f93afbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c1633aead408b08dd430b970082abc"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#ae2c1633aead408b08dd430b970082abc">gc_execute_line</a> (char *line)</td></tr>
<tr class="memdesc:ae2c1633aead408b08dd430b970082abc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes one line of 0-terminated G-Code. The line is assumed to contain only uppercase.  <a href="#ae2c1633aead408b08dd430b970082abc">More...</a><br /></td></tr>
<tr class="separator:ae2c1633aead408b08dd430b970082abc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4abacf1d13f3818052284b61898f6850"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a4abacf1d13f3818052284b61898f6850">if</a> (axis_words)</td></tr>
<tr class="memdesc:a4abacf1d13f3818052284b61898f6850"><td class="mdescLeft">&#160;</td><td class="mdescRight"><hr/>
<p> STEP 3: Error-check all commands and values passed in this block. This step ensures all of the commands are valid for execution and follows the NIST standard as closely as possible. If an error is found, all commands and values in this block are dumped and will not update the active system g-code modes. If the block is ok, the active system g-code modes will be updated based on the commands of this block, and signal for it to be executed.  <a href="#a4abacf1d13f3818052284b61898f6850">More...</a><br /></td></tr>
<tr class="separator:a4abacf1d13f3818052284b61898f6850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad398fa9fd2c227ecae4f01cba102d1fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#ad398fa9fd2c227ecae4f01cba102d1fc">if</a> (<a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(value_words, <a class="el" href="nuts__bolts_8h.html#a62fe4f31d7cd6087317744dd800a86c3">bit</a>(<a class="el" href="gcode_8h.html#af089307d2d6d813efff5ac3c139f1b58">WORD_N</a>)))</td></tr>
<tr class="separator:ad398fa9fd2c227ecae4f01cba102d1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0395f747ef64800564e2826712677f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a2b0395f747ef64800564e2826712677f">if</a> (gc_parser_flags &amp;<a class="el" href="gcode_8h.html#ac2e67abf833253acfffee65e94f8027d">GC_PARSER_JOG_MOTION</a>)</td></tr>
<tr class="memdesc:a2b0395f747ef64800564e2826712677f"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Single-meaning value word. Set at end of error-checking.  <a href="#a2b0395f747ef64800564e2826712677f">More...</a><br /></td></tr>
<tr class="separator:a2b0395f747ef64800564e2826712677f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0261c074270a0803f619277ebc6aa096"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a0261c074270a0803f619277ebc6aa096">if</a> (<a class="el" href="gcode_8c.html#a99552628511de903a17c0fb229541c25">gc_block.modal.units</a>==<a class="el" href="gcode_8h.html#a8d6ee3ff5a4d81f17ab072737fc4774b">UNITS_MODE_INCHES</a>)</td></tr>
<tr class="separator:a0261c074270a0803f619277ebc6aa096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c62f4e9e4047c447327f04b98193d93"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a0c62f4e9e4047c447327f04b98193d93">if</a> (axis_command==<a class="el" href="gcode_8c.html#a86f29b6ddc9d187d81cb71a32aee5443">AXIS_COMMAND_TOOL_LENGTH_OFFSET</a>)</td></tr>
<tr class="memdesc:a0c62f4e9e4047c447327f04b98193d93"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Since cutter radius compensation is never enabled, these G40 errors don't apply. Grbl supports G40.  <a href="#a0c62f4e9e4047c447327f04b98193d93">More...</a><br /></td></tr>
<tr class="separator:a0c62f4e9e4047c447327f04b98193d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128e39def1a8fc3b5a05a4cae3f7c1b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a128e39def1a8fc3b5a05a4cae3f7c1b7">memcpy</a> (<a class="el" href="gcode_8c.html#a90752ee67a022b4a18f4e42a6717454d">block_coord_system</a>, gc_state.coord_system, sizeof(gc_state.coord_system))</td></tr>
<tr class="separator:a128e39def1a8fc3b5a05a4cae3f7c1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31987da6e21d3a140e5c256d3faa9531"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a31987da6e21d3a140e5c256d3faa9531">if</a> (<a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(command_words, <a class="el" href="nuts__bolts_8h.html#a62fe4f31d7cd6087317744dd800a86c3">bit</a>(<a class="el" href="gcode_8h.html#a399e4f2d683b137814f911a3b7ee15c4">MODAL_GROUP_G12</a>)))</td></tr>
<tr class="separator:a31987da6e21d3a140e5c256d3faa9531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a672c3a07674e20d2fdc97b65fd42cb94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a672c3a07674e20d2fdc97b65fd42cb94">switch</a> (gc_block.non_modal_command)</td></tr>
<tr class="memdesc:a672c3a07674e20d2fdc97b65fd42cb94"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: We need to separate the non-modal commands that are axis word-using (G10/G28/G30/G92), as these.  <a href="#a672c3a07674e20d2fdc97b65fd42cb94">More...</a><br /></td></tr>
<tr class="separator:a672c3a07674e20d2fdc97b65fd42cb94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9c2ab34945cde5717c20c409712066"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a8d9c2ab34945cde5717c20c409712066">if</a> (value_words)</td></tr>
<tr class="memdesc:a8d9c2ab34945cde5717c20c409712066"><td class="mdescLeft">&#160;</td><td class="mdescRight">[Unused words]  <a href="#a8d9c2ab34945cde5717c20c409712066">More...</a><br /></td></tr>
<tr class="separator:a8d9c2ab34945cde5717c20c409712066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a98483b45c1f06934ae63fdf4297a54"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a0a98483b45c1f06934ae63fdf4297a54">memset</a> (<a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a>, 0, sizeof(<a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a>))</td></tr>
<tr class="memdesc:a0a98483b45c1f06934ae63fdf4297a54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero pl_data struct.  <a href="#a0a98483b45c1f06934ae63fdf4297a54">More...</a><br /></td></tr>
<tr class="separator:a0a98483b45c1f06934ae63fdf4297a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8603f2ed82e350636f949f7b20b1835e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a8603f2ed82e350636f949f7b20b1835e">if</a> (<a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(settings.flags, <a class="el" href="settings_8h.html#aa8d5aa4a64acdb118fc0e8bc67ff9411">BITFLAG_LASER_MODE</a>))</td></tr>
<tr class="separator:a8603f2ed82e350636f949f7b20b1835e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a012885f31342ac04ff061d97aeabdf96"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a012885f31342ac04ff061d97aeabdf96">if</a> (<a class="el" href="gcode_8c.html#abbaf9b157ba8bc6453ff46d4ea4432da">gc_state.modal.feed_rate</a>)</td></tr>
<tr class="memdesc:a012885f31342ac04ff061d97aeabdf96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set condition flag for planner use.  <a href="#a012885f31342ac04ff061d97aeabdf96">More...</a><br /></td></tr>
<tr class="separator:a012885f31342ac04ff061d97aeabdf96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a001db60662446b41f6c39d702b3ab7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a1a001db60662446b41f6c39d702b3ab7">if</a> ((gc_state.spindle_speed!=gc_block.values.s)||<a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(gc_parser_flags, <a class="el" href="gcode_8h.html#a57b0ef11fc87a48a79835fc2677ec84e">GC_PARSER_LASER_FORCE_SYNC</a>))</td></tr>
<tr class="separator:a1a001db60662446b41f6c39d702b3ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade2c3d9a4e9eb8a620342b52a31a7345"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#ade2c3d9a4e9eb8a620342b52a31a7345">if</a> (<a class="el" href="nuts__bolts_8h.html#a34837c25808f584a3a887abf4c847c9f">bit_isfalse</a>(gc_parser_flags, <a class="el" href="gcode_8h.html#a070a1436df0ddcd0f9f072f12d2325ca">GC_PARSER_LASER_DISABLE</a>))</td></tr>
<tr class="memdesc:ade2c3d9a4e9eb8a620342b52a31a7345"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Pass zero spindle speed for all restricted laser motions.  <a href="#ade2c3d9a4e9eb8a620342b52a31a7345">More...</a><br /></td></tr>
<tr class="separator:ade2c3d9a4e9eb8a620342b52a31a7345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d368fecb56ab202d565d66b12f020d2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a3d368fecb56ab202d565d66b12f020d2">if</a> (gc_state.modal.spindle!=gc_block.modal.spindle)</td></tr>
<tr class="separator:a3d368fecb56ab202d565d66b12f020d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25d46a01c154eaf83ba181158516a870"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a25d46a01c154eaf83ba181158516a870">if</a> (gc_state.modal.coolant!=gc_block.modal.coolant)</td></tr>
<tr class="separator:a25d46a01c154eaf83ba181158516a870"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62d0f8013b3763860fb451f3c4496bf0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a62d0f8013b3763860fb451f3c4496bf0">if</a> (gc_block.non_modal_command==<a class="el" href="gcode_8h.html#ac8d077023bbc76482ef04f7ecf50d30f">NON_MODAL_DWELL</a>)</td></tr>
<tr class="separator:a62d0f8013b3763860fb451f3c4496bf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa29b22e87387f6d2ac6dd78df900bb4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#afa29b22e87387f6d2ac6dd78df900bb4">if</a> (gc_state.modal.coord_select!=gc_block.modal.coord_select)</td></tr>
<tr class="separator:afa29b22e87387f6d2ac6dd78df900bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004d00fab2333f653b9ac06aa0dfa4cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a004d00fab2333f653b9ac06aa0dfa4cc">if</a> (gc_state.modal.motion!=<a class="el" href="gcode_8h.html#a601e1f2603b1a522b06700b4f3ad3724">MOTION_MODE_NONE</a>)</td></tr>
<tr class="separator:a004d00fab2333f653b9ac06aa0dfa4cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6326b13677ba2db62df39610147bc5e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a6326b13677ba2db62df39610147bc5e0">return</a> (<a class="el" href="report_8h.html#a2403320c41f08e7567cb169de5db66b3">STATUS_OK</a>)</td></tr>
<tr class="separator:a6326b13677ba2db62df39610147bc5e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8578fbe21337c416257c19321fd2a214"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#structparser__state__t">parser_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a8578fbe21337c416257c19321fd2a214">gc_state</a></td></tr>
<tr class="memdesc:a8578fbe21337c416257c19321fd2a214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare gc extern struct.  <a href="#a8578fbe21337c416257c19321fd2a214">More...</a><br /></td></tr>
<tr class="separator:a8578fbe21337c416257c19321fd2a214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734f2866346563ed343fd63da8509e9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#structparser__block__t">parser_block_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a734f2866346563ed343fd63da8509e9e">gc_block</a></td></tr>
<tr class="separator:a734f2866346563ed343fd63da8509e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0544c3fe466e421738dae463968b70ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a0544c3fe466e421738dae463968b70ba">else</a></td></tr>
<tr class="memdesc:a0544c3fe466e421738dae463968b70ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove single-meaning value words.  <a href="#a0544c3fe466e421738dae463968b70ba">More...</a><br /></td></tr>
<tr class="separator:a0544c3fe466e421738dae463968b70ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90752ee67a022b4a18f4e42a6717454d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a90752ee67a022b4a18f4e42a6717454d">block_coord_system</a> [<a class="el" href="nuts__bolts_8h.html#ad05168a527143ab187f87ef4d77ecdce">N_AXIS</a>]</td></tr>
<tr class="separator:a90752ee67a022b4a18f4e42a6717454d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85dbd8b7e310c15b4620ce0a0256ccb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a85dbd8b7e310c15b4620ce0a0256ccb3">plan_data</a></td></tr>
<tr class="memdesc:a85dbd8b7e310c15b4620ce0a0256ccb3"><td class="mdescLeft">&#160;</td><td class="mdescRight"><hr/>
<p> STEP 4: EXECUTE!! Assumes that all error-checking has been completed and no failure modes exist. We just need to update the state and execute the block according to the order-of-execution.  <a href="#a85dbd8b7e310c15b4620ce0a0256ccb3">More...</a><br /></td></tr>
<tr class="separator:a85dbd8b7e310c15b4620ce0a0256ccb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a8a4abb31e881b8b50fe72bd8933073"><td class="memItemLeft" align="right" valign="top"><a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a> = &amp;<a class="el" href="gcode_8c.html#a85dbd8b7e310c15b4620ce0a0256ccb3">plan_data</a></td></tr>
<tr class="separator:a6a8a4abb31e881b8b50fe72bd8933073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96786c01ef7cd2e0b05d43d019ee57a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a96786c01ef7cd2e0b05d43d019ee57a2">line_number</a> = gc_block.values.n</td></tr>
<tr class="memdesc:a96786c01ef7cd2e0b05d43d019ee57a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: If no line number is present, the value is zero.  <a href="#a96786c01ef7cd2e0b05d43d019ee57a2">More...</a><br /></td></tr>
<tr class="separator:a96786c01ef7cd2e0b05d43d019ee57a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbaf9b157ba8bc6453ff46d4ea4432da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#abbaf9b157ba8bc6453ff46d4ea4432da">feed_rate</a> = gc_block.modal.feed_rate</td></tr>
<tr class="memdesc:abbaf9b157ba8bc6453ff46d4ea4432da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Always copy this value. See feed rate error-checking.  <a href="#abbaf9b157ba8bc6453ff46d4ea4432da">More...</a><br /></td></tr>
<tr class="separator:abbaf9b157ba8bc6453ff46d4ea4432da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28d01972c130b184b625afd05fe49cf7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a28d01972c130b184b625afd05fe49cf7">tool</a> = gc_block.values.t</td></tr>
<tr class="separator:a28d01972c130b184b625afd05fe49cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3056eefd51c377c5f2fb9e854dd54849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a3056eefd51c377c5f2fb9e854dd54849">condition</a> = gc_state.modal.spindle</td></tr>
<tr class="memdesc:a3056eefd51c377c5f2fb9e854dd54849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set condition flag for planner use.  <a href="#a3056eefd51c377c5f2fb9e854dd54849">More...</a><br /></td></tr>
<tr class="separator:a3056eefd51c377c5f2fb9e854dd54849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a227ee1981e9441e4b4d1739f70ddd516"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a227ee1981e9441e4b4d1739f70ddd516">plane_select</a> = gc_block.modal.plane_select</td></tr>
<tr class="separator:a227ee1981e9441e4b4d1739f70ddd516"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99552628511de903a17c0fb229541c25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a99552628511de903a17c0fb229541c25">units</a> = gc_block.modal.units</td></tr>
<tr class="separator:a99552628511de903a17c0fb229541c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a110563b2fd1cbf9ff6af162f20e613d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a110563b2fd1cbf9ff6af162f20e613d5">distance</a> = gc_block.modal.distance</td></tr>
<tr class="memdesc:a110563b2fd1cbf9ff6af162f20e613d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Always default.  <a href="#a110563b2fd1cbf9ff6af162f20e613d5">More...</a><br /></td></tr>
<tr class="separator:a110563b2fd1cbf9ff6af162f20e613d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4fdb3f5c9ebd708bd37e1b4746a0be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#abf4fdb3f5c9ebd708bd37e1b4746a0be">motion</a> = gc_block.modal.motion</td></tr>
<tr class="memdesc:abf4fdb3f5c9ebd708bd37e1b4746a0be"><td class="mdescLeft">&#160;</td><td class="mdescRight">NOTE: Commands G10,G28,G30,G92 lock out and prevent axis words from use in motion modes.  <a href="#abf4fdb3f5c9ebd708bd37e1b4746a0be">More...</a><br /></td></tr>
<tr class="separator:abf4fdb3f5c9ebd708bd37e1b4746a0be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d762e78eba778a881b273f8052d5cf5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="gcode_8c.html#a9d762e78eba778a881b273f8052d5cf5">program_flow</a> = gc_block.modal.program_flow</td></tr>
<tr class="separator:a9d762e78eba778a881b273f8052d5cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a6f90b46c5ff40f120a0e91bae5d6fd64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AXIS_COMMAND_MOTION_MODE&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00032">32</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6c92a959513c5f5cd9ffa4a7f55c221d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AXIS_COMMAND_NON_MODAL&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00031">31</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="aae667a7d036f9eb5c5160c511160787e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AXIS_COMMAND_NONE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00030">30</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a86f29b6ddc9d187d81cb71a32aee5443"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AXIS_COMMAND_TOOL_LENGTH_OFFSET&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>*Undefined but required </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00033">33</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a680597f21a6820d4378600a5385ddb83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FAIL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">status</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="gcode_8c.html#a6326b13677ba2db62df39610147bc5e0">return</a>(status);</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00038">38</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a94ce060fa38110f7d38f30d990cf6ec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_LINE_NUMBER&#160;&#160;&#160;10000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Max line number is defined by the g-code standard to be 99999. </p>
<p>It seems to be an </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00027">27</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9b43b0f34b36a1f71550c700395426ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_TOOL_NUMBER&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Limited by max unsigned 8-bit value. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00028">28</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae2c1633aead408b08dd430b970082abc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t gc_execute_line </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes one line of 0-terminated G-Code. The line is assumed to contain only uppercase. </p>
<p>Execute one block of rs275/ngc/g-code. </p>
<hr/>
<p> STEP 1: Initialize parser block struct and copy current g-code state modes. The parser updates these modes and commands as the block line is parser and will only be used and executed after successful error-checking. The parser block struct also contains a block values struct, word tracking variables, and a non-modal commands tracker for the new block. This struct contains all of the necessary information to execute the block.</p>
<p>&lt; Initialize the parser block struct.</p>
<p>&lt; Copy current modes</p>
<p>&lt; Tracks G10 P coordinate selection for execution</p>
<p>&lt; XYZ tracking</p>
<p>&lt; IJK tracking</p>
<p>&lt; Tracks G and M command words. Also used for modal group violations.</p>
<p>&lt; Tracks value words.</p>
<p>&lt;</p>
<p>NOTE: <code>$J=</code> already parsed when passed to this function.</p>
<p>&lt; Initialize default line number reported during jog. </p><hr/>
<p> STEP 2: Import all g-code words in the block line. A g-code word is a letter followed by a number, which can either be a 'G'/'M' command or sets/assigns a command value. Also, perform initial error-checks for command word modal group violations, for any repeated words, and for negative values set for the value words F, N, P, T, and S.</p>
<p>&lt; Bit-value for assigning tracking variables</p>
<p>&lt; Loop until no more g-code words in line.</p>
<p>NOTE: Mantissa is multiplied by 100 to catch non-integer command values. This is more</p>
<p>&lt; Compute mantissa for Gxx.x commands.</p>
<p>NOTE: Rounding must be used to catch small floating point errors.</p>
<p>'G' and 'M' Command Words: Parse commands and check for modal group violations.</p>
<p>/ NOTE: Modal group numbers are defined in Table 4 of NIST RS274-NGC v3, pg.20</p>
<p>&lt; Ignore G28.1, G30.1, and G92.1</p>
<p>&lt; Set to zero to indicate valid non-integer G command.</p>
<p>&lt; [Unsupported G38.x command]</p>
<p>&lt; Set to zero to indicate valid non-integer G command.</p>
<p>&lt; Set to zero to indicate valid non-integer G command.</p>
<p>NOTE: Not required since cutter radius compensation is always disabled. Only here</p>
<p>NOTE: The NIST g-code standard vaguely states that when a tool length offset is changed,</p>
<p>&lt; G49</p>
<p>&lt; G43.1</p>
<p>&lt; Set to zero to indicate valid non-integer G command.</p>
<p>NOTE: G59.x are not supported. (But their int_values would be 60, 61, and 62.)</p>
<p>&lt; Shift to array indexing.</p>
<p>&lt; [Unsupported G command]</p>
<p>NOTE: Variable 'word_bit' is always assigned, if the command is valid.</p>
<p>&lt; Program pause</p>
<p>&lt; Optional stop not supported. Ignore.</p>
<p>&lt; Program end and reset</p>
<p>&lt; [Unsupported M command]</p>
<p>NOTE: Variable 'word_bit' is always assigned, if the command is valid.</p>
<p>NOTE: All remaining letters assign values.</p>
<p>Non-Command Words: This initial parsing phase only checks for repeats of the remaining legal g-code words and stores their value. Error-checking is performed later since some words (I,J,K,L,P,R) have multiple connotations and/or depend on the issued commands.</p>
<p>NOTE: For certain commands, P value must be an integer, but none of these commands are supported.</p>
<p>NOTE: Variable 'word_bit' is always assigned, if the non-command letter is valid.</p>
<p>NOTE: Negative value check is done here simply for code-efficiency.</p>
<p>&lt; Flag to indicate parameter assigned. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00063">63</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad1d03b51ab39d02550d5ea8b02098ab7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gc_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the parser. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00041">41</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9d97704c3605ca7d1d9186fc1f93afbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gc_sync_position </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets g-code parser position in mm. Input in steps. Called by the system abort and hard. </p>
<p>Set g-code parser position. Input in steps. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00053">53</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4abacf1d13f3818052284b61898f6850"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">axis_words&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><hr/>
<p> STEP 3: Error-check all commands and values passed in this block. This step ensures all of the commands are valid for execution and follows the NIST standard as closely as possible. If an error is found, all commands and values in this block are dumped and will not update the active system g-code modes. If the block is ok, the active system g-code modes will be updated based on the commands of this block, and signal for it to be executed. </p>
<p>Also, we have to pre-convert all of the values passed based on the modes set by the parsed block. There are a number of error-checks that require target information that can only be accurately calculated if we convert these values in conjunction with the error-checking. This relegates the next execution step as only updating the system g-code modes and performing the programmed actions in order. The execution step should not require any conversion calculations and would only require minimal checks necessary to execute.</p>
<p>/ NOTE: At this point, the g-code block has been parsed and the block line can be freed.</p>
<p>/ NOTE: It's also possible, at some future point, to break up STEP 2, to allow piece-wise parsing of the block on a per-word basis, rather than the entire block. This could remove the need for maintaining a large string variable for the entire block and free up some memory. To do this, this would simply need to retain all of the data in STEP 1, such as the new block data struct, the modal group and value bitflag tracking variables, and axis array indices compatible variables. This data contains all of the information necessary to error-check the new g-code block when the EOL character is received. However, this would break Grbl's startup lines in how it currently works and would require some refactoring to make it compatible. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00367">367</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad398fa9fd2c227ecae4f01cba102d1fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(value_words, <a class="el" href="nuts__bolts_8h.html#a62fe4f31d7cd6087317744dd800a86c3">bit</a>(<a class="el" href="gcode_8h.html#af089307d2d6d813efff5ac3c139f1b58">WORD_N</a>))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00372">372</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2b0395f747ef64800564e2826712677f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_parser_flags &amp;&#160;</td>
          <td class="paramname"><em>GC_PARSER_JOG_MOTION</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Single-meaning value word. Set at end of error-checking. </p>
<p>NOTE: G-code parser state is not updated, except the position to ensure sequential jog.</p>
<p>NOTE: Single-meaning value words are removed all at once at the end of error-checking, because NOTE: For jogging, ignore prior feed rate mode. Enforce G94 and check for required F word. </p>
<p>NOTE: Feed rate word and axis word checks have already been performed in STEP 3. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00393">393</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0261c074270a0803f619277ebc6aa096"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_block.modal.&#160;</td>
          <td class="paramname"><em>units</em> = <code>=&#160;<a class="el" href="gcode_8h.html#a8d6ee3ff5a4d81f17ab072737fc4774b">UNITS_MODE_INCHES</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; Axes indices are consistent, so loop may be used.</p>
<p>NOTE: Even non-modal commands or TLO that use axis words will throw this strict error. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00475">475</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0c62f4e9e4047c447327f04b98193d93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">axis_command&#160;</td>
          <td class="paramname"> = <code>=&#160;<a class="el" href="gcode_8c.html#a86f29b6ddc9d187d81cb71a32aee5443">AXIS_COMMAND_TOOL_LENGTH_OFFSET</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Since cutter radius compensation is never enabled, these G40 errors don't apply. Grbl supports G40. </p>
<p>NOTE: Not needed since always disabled.</p>
<p>Remove axis words.</p>
<p>NOTE: Although not explicitly stated so, G43.1 should be applied to only one valid</p>
<p>NOTE: If G43 were supported, its operation wouldn't be any different from G43.1 in terms </p>
<p>&lt; Indicates called in block.</p>
<p>&lt; No break intentional.</p>
<p>NOTE: Both radius and offsets are required for arc tracing and are pre-computed with the error-checking.</p>
<p>&lt; Delta x between current position and target</p>
<p>&lt; Delta y between current position and target</p>
<p>&lt; Arc Radius Mode</p>
<p>We need to calculate the center of the circle that has the designated radius and passes through both the current position and the target position. This method calculates the following set of equations where [x,y] is the vector from current to target position, d == magnitude of that vector, h == hypotenuse of the triangle formed by the radius of the circle, the distance to the center of the travel vector. A vector perpendicular to the travel vector [-y,x] is scaled to the length of h [-y/d*h, x/d*h] and added to the center of the travel vector [x/2,y/2] to form the new point [i,j] at [x/2-y/d*h, y/2+x/d*h] which will be the center of our arc.</p>
<p>d^2 == x^2 + y^2 h^2 == r^2 - (d/2)^2 i == x/2 - y/d*h j == y/2 + x/d*h </p><pre class="fragment">                                                 O &lt;- [i,j]
                                              -  |
                                    r      -     |
                                        -        |
                                     -           | h
                                  -              |
                    [0,0] -&gt;  C -----------------+--------------- T  &lt;- [x,y]
                              | &lt;------ d/2 ----&gt;|
</pre><p>C - Current position T - Target position O - center of circle that pass through both C and T d - distance from C to T r - designated radius h - distance from center of CT to O</p>
<p>Expanding the equations:</p>
<p>d -&gt; sqrt(x^2 + y^2) h -&gt; sqrt(4 * r^2 - x^2 - y^2)/2 i -&gt; (x - (y * sqrt(4 * r^2 - x^2 - y^2)) / sqrt(x^2 + y^2)) / 2 j -&gt; (y + (x * sqrt(4 * r^2 - x^2 - y^2)) / sqrt(x^2 + y^2)) / 2</p>
<p>Which can be written:</p>
<p>i -&gt; (x - (y * sqrt(4 * r^2 - x^2 - y^2))/sqrt(x^2 + y^2))/2 j -&gt; (y + (x * sqrt(4 * r^2 - x^2 - y^2))/sqrt(x^2 + y^2))/2</p>
<p>Which we for size and speed reasons optimize to:</p>
<p>h_x2_div_d = sqrt(4 * r^2 - x^2 - y^2)/sqrt(x^2 + y^2) i = (x - (y * h_x2_div_d))/2 j = (y + (x * h_x2_div_d))/2</p>
<p>&lt; == -(h * 2 / d)</p>
<p>The counter clockwise circle lies to the left of the target direction. When offset is positive, the left hand circle will be generated - when it is negative the right hand circle is generated. </p><pre class="fragment">                                                T  &lt;-- Target position

                                                ^
     Clockwise circles with this center         |          Clockwise circles with this center will have
     will have &gt; 180 deg of angular travel      |          &lt; 180 deg of angular travel, which is a good thing!
                                      \         |          /
</pre><p> center of arc when h_x2_div_d is positive -&gt; x &lt;&ndash;&mdash; | &ndash;&mdash;&gt; x &lt;- center of arc when h_x2_div_d is negative | |</p>
<p>C &lt;&ndash; Current position</p>
<p>&lt; Finished with r. Set to positive for mc_arc</p>
<p>&lt; Arc Center Format Offset Mode</p>
<p>&lt; Axes indices are consistent, so loop may be used to save flash space.</p>
<p>&lt; Delta x between circle center and target</p>
<p>&lt; Delta y between circle center and target</p>
<p>&lt; No break intentional.</p>
<p>NOTE: Probe check moved to probe cycle. Instead of returning</p>
<p>&lt; Indicates a change.</p>
<p>&lt; G49 </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00495">495</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a31987da6e21d3a140e5c256d3faa9531"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(command_words, <a class="el" href="nuts__bolts_8h.html#a62fe4f31d7cd6087317744dd800a86c3">bit</a>(<a class="el" href="gcode_8h.html#a399e4f2d683b137814f911a3b7ee15c4">MODAL_GROUP_G12</a>))&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; Check if called in block </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00508">508</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8d9c2ab34945cde5717c20c409712066"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">value_words&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>[Unused words] </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00849">849</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8603f2ed82e350636f949f7b20b1835e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(settings.flags, <a class="el" href="settings_8h.html#aa8d5aa4a64acdb118fc0e8bc67ff9411">BITFLAG_LASER_MODE</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NOTE: G1 and G0 without axis words sets axis_command to none. G28/30 are intentionally omitted. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Check sync conditions for M3 enabled motions that don't enter the planner. (zero length). </dd></dl>
<p>&lt; Change from G1/2/3 motion mode. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00884">884</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a012885f31342ac04ff061d97aeabdf96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_state.modal.&#160;</td>
          <td class="paramname"><em>feed_rate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set condition flag for planner use. </p>
<p>&lt; Sync and finish all remaining buffered motions before moving on.</p>
<p>&lt; Use feed hold for program pause.</p>
<p>&lt; Execute suspend.</p>
<p>&lt; == PROGRAM_FLOW_COMPLETED</p>
<p>&lt; G54</p>
<p>&lt; Set to refresh immediately just in case something altered.</p>
<p>&lt; Reset program flow. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00925">925</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1a001db60662446b41f6c39d702b3ab7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">(gc_state.spindle_speed!=gc_block.values.s)||<a class="el" href="nuts__bolts_8h.html#a96664fec8bc733e8d12afab53ca0d2f5">bit_istrue</a>(gc_parser_flags, <a class="el" href="gcode_8h.html#a57b0ef11fc87a48a79835fc2677ec84e">GC_PARSER_LASER_FORCE_SYNC</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; Update spindle speed state. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00932">932</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="ade2c3d9a4e9eb8a620342b52a31a7345"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="nuts__bolts_8h.html#a34837c25808f584a3a887abf4c847c9f">bit_isfalse</a>(gc_parser_flags, <a class="el" href="gcode_8h.html#a070a1436df0ddcd0f9f072f12d2325ca">GC_PARSER_LASER_DISABLE</a>)&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Pass zero spindle speed for all restricted laser motions. </p>
<p>else { pl_data-&gt;spindle_speed = 0.0; } //!&lt; Initialized as zero already. </p>
<p>&lt; Record data for planner use. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00944">944</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3d368fecb56ab202d565d66b12f020d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_state.modal.spindle!&#160;</td>
          <td class="paramname"> = <code>gc_block.modal.spindle</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NOTE: All spindle state changes are synced, even in laser mode. Also, pl_data, </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00954">954</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a25d46a01c154eaf83ba181158516a870"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_state.modal.coolant!&#160;</td>
          <td class="paramname"> = <code>gc_block.modal.coolant</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>NOTE: Coolant M-codes are modal. Only one command per line is allowed. But, multiple states </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00965">965</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a62d0f8013b3763860fb451f3c4496bf0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_block.&#160;</td>
          <td class="paramname"><em>non_modal_command</em> = <code>=&#160;<a class="el" href="gcode_8h.html#ac8d077023bbc76482ef04f7ecf50d30f">NON_MODAL_DWELL</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00978">978</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="afa29b22e87387f6d2ac6dd78df900bb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_state.modal.coord_select!&#160;</td>
          <td class="paramname"> = <code>gc_block.modal.coord_select</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l01007">1007</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a004d00fab2333f653b9ac06aa0dfa4cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype">gc_state.modal.motion!&#160;</td>
          <td class="paramname"> = <code><a class="el" href="gcode_8h.html#a601e1f2603b1a522b06700b4f3ad3724">MOTION_MODE_NONE</a></code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; Set rapid motion condition flag.</p>
<p>NOTE: gc_block.values.xyz is returned from mc_probe_cycle with the updated position value. So</p>
<p>&lt; gc_state.position[] = gc_block.values.xyz[]</p>
<p>&lt; gc_state.position[] = sys_position </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l01062">1062</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a128e39def1a8fc3b5a05a4cae3f7c1b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memcpy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gcode_8c.html#a90752ee67a022b4a18f4e42a6717454d">block_coord_system</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gc_state.&#160;</td>
          <td class="paramname"><em>coord_system</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sizeof(gc_state.coord_system)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0a98483b45c1f06934ae63fdf4297a54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">memset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sizeof(<a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a>)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zero pl_data struct. </p>

</div>
</div>
<a class="anchor" id="a6326b13677ba2db62df39610147bc5e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">return </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="report_8h.html#a2403320c41f08e7567cb169de5db66b3">STATUS_OK</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>% to denote start of program. </dd></dl>

</div>
</div>
<a class="anchor" id="a672c3a07674e20d2fdc97b65fd42cb94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">switch </td>
          <td>(</td>
          <td class="paramtype">gc_block.&#160;</td>
          <td class="paramname"><em>non_modal_command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: We need to separate the non-modal commands that are axis word-using (G10/G28/G30/G92), as these. </p>
<p>&lt; [No axis words]</p>
<p>&lt; Convert p value to int.</p>
<p>NOTE: Store parameter data in IJK values. By rule, they are not in use with this command.</p>
<p>&lt; Axes indices are consistent, so loop may be used.</p>
<p>&lt; Axes indices are consistent, so loop may be used.</p>
<p>NOTE: Tool offsets may be appended to these conversions when/if this feature is added.</p>
<p>&lt; TLO block any axis command.</p>
<p>&lt; Axes indices are consistent, so loop may be used to save flash space.</p>
<p>&lt; No axis word in block. Keep same axis position.</p>
<p>NOTE: G53 is never active with G28/30 since they are in the same modal group.</p>
<p>&lt; Incremental mode</p>
<p>&lt; G28</p>
<p>&lt; G30</p>
<p>NOTE: Store parameter data in IJK values. By rule, they are not in use with this command.</p>
<p>&lt; == NON_MODAL_GO_HOME_1</p>
<p>&lt; Set to none if no intermediate motion.</p>
<p>&lt; G28.1</p>
<p>&lt; G30.1</p>
<p>NOTE: If axis words are passed here, they are interpreted as an implicit motion mode.</p>
<p>NOTE: If axis words are passed here, they are interpreted as an implicit motion mode.</p>
<p>NOTE: All explicit axis word commands are in this modal group. So no implicit check necessary.</p>
<p>&lt; [G53 G0/1 not active]</p>
<p>&lt; Set rapid motion condition flag.</p>
<p>&lt; Disable G92 offsets by zeroing offset vector. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00525">525</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a90752ee67a022b4a18f4e42a6717454d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float block_coord_system[<a class="el" href="nuts__bolts_8h.html#ad05168a527143ab187f87ef4d77ecdce">N_AXIS</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>An EEPROM read of the coordinate data may require a buffer sync when the cycle </dd></dl>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00506">506</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3056eefd51c377c5f2fb9e854dd54849"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a> condition = gc_state.modal.spindle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set condition flag for planner use. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00962">962</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a110563b2fd1cbf9ff6af162f20e613d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal distance = gc_block.modal.distance</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Always default. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l01018">1018</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0544c3fe466e421738dae463968b70ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">else</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove single-meaning value words. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00396">396</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="abbaf9b157ba8bc6453ff46d4ea4432da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a> feed_rate = gc_block.modal.feed_rate</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Always copy this value. See feed rate error-checking. </p>
<p>Record data for planner use. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00924">924</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a734f2866346563ed343fd63da8509e9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#structparser__block__t">parser_block_t</a> gc_block</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00036">36</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8578fbe21337c416257c19321fd2a214"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#structparser__state__t">parser_state_t</a> gc_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare gc extern struct. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00035">35</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a96786c01ef7cd2e0b05d43d019ee57a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8c.html#a6a8a4abb31e881b8b50fe72bd8933073">pl_data</a> line_number = gc_block.values.n</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: If no line number is present, the value is zero. </p>
<p>Record data for planner use. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00918">918</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="abf4fdb3f5c9ebd708bd37e1b4746a0be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal motion = gc_block.modal.motion</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NOTE: Commands G10,G28,G30,G92 lock out and prevent axis words from use in motion modes. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l01061">1061</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6a8a4abb31e881b8b50fe72bd8933073"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a>* pl_data = &amp;<a class="el" href="gcode_8c.html#a85dbd8b7e310c15b4620ce0a0256ccb3">plan_data</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00859">859</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85dbd8b7e310c15b4620ce0a0256ccb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="planner_8h.html#structplan__line__data__t">plan_line_data_t</a> plan_data</td>
        </tr>
      </table>
</div><div class="memdoc">

<p><hr/>
<p> STEP 4: EXECUTE!! Assumes that all error-checking has been completed and no failure modes exist. We just need to update the state and execute the block according to the order-of-execution. </p>

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00858">858</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a227ee1981e9441e4b4d1739f70ddd516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal plane_select = gc_block.modal.plane_select</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00981">981</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9d762e78eba778a881b273f8052d5cf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal program_flow = gc_block.modal.program_flow</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l01097">1097</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28d01972c130b184b625afd05fe49cf7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> tool = gc_block.values.t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00949">949</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
<a class="anchor" id="a99552628511de903a17c0fb229541c25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="gcode_8h.html#a8578fbe21337c416257c19321fd2a214">gc_state</a> modal units = gc_block.modal.units</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="gcode_8c_source.html#l00984">984</a> of file <a class="el" href="gcode_8c_source.html">gcode.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_16af47fdf13b652490b4f721f0228326.html">grbl</a></li><li class="navelem"><a class="el" href="gcode_8c.html">gcode.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
